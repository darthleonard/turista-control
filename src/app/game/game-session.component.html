<app-header title="GAME_SESSION"></app-header>

<ion-content class="ion-padding">
  <!-- BotÃ³n para iniciar nueva partida -->
  <div *ngIf="!gameState" class="ion-text-center" style="margin-top: 5em">
    <p>{{ "GAME_SESSION_NO_ACTIVE" | translate }}</p>
    <ion-button expand="block" color="primary" (click)="startNewGame()">
      {{ "GAME_SESSION_START_NEW" | translate }}
    </ion-button>
  </div>

  <!-- Juego activo -->
  <div *ngIf="gameState">
    <h2>{{ "GAME_SESSION_TURN" | translate }} {{ gameState.turnNumber }}</h2>
    <p>{{ "GAME_SESSION_CURRENT_PLAYER" | translate }} {{ currentPlayerId }}</p>

    <ion-button expand="block" color="primary" (click)="nextTurn()">
      {{ "GAME_SESSION_NEXT_TURN" | translate }}
    </ion-button>

    <h3>{{ "GAME_SESSION_PLAYERS" | translate }}</h3>
    <ion-list>
      <ion-item *ngFor="let player of players">
        {{ player.name }} - Cash: {{ getPlayerCash(player.id) }} - Props:
        {{ getPlayerPropertiesLength(player.id) }}
      </ion-item>
    </ion-list>

    <h3>{{ "GAME_SESSION_ACTIONS" | translate }}</h3>
    <ion-button expand="block" (click)="movePlayer(1)">{{
      "GAME_SESSION_MOVE_1" | translate
    }}</ion-button>
    <ion-button expand="block" (click)="movePlayer(2)">{{
      "GAME_SESSION_MOVE_2" | translate
    }}</ion-button>
    <ion-button expand="block" color="success" (click)="buyProperty(1)">{{
      "GAME_SESSION_BUY_PROPERTY" | translate
    }}</ion-button>
    <ion-button expand="block" color="tertiary" (click)="payRent(1, 2)">{{
      "GAME_SESSION_PAY_RENT" | translate
    }}</ion-button>
    <ion-button
      expand="block"
      color="danger"
      (click)="endGame(currentPlayerId!)"
    >
      {{ "GAME_SESSION_END_GAME" | translate }}
    </ion-button>

    <h3>{{ "GAME_SESSION_LOG" | translate }}</h3>
    <div *ngFor="let entry of gameState.log">{{ entry }}</div>
  </div>
</ion-content>
